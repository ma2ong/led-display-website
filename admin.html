<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è”é”¦LEDç®¡ç†ç³»ç»Ÿ - å®Œæ•´ç‰ˆ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: #f8f9fa;
            margin: 0;
            padding: 0;
        }
        
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: 200px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            z-index: 1000;
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }
        
        .sidebar .brand {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.1);
        }
        
        .sidebar .brand h5 {
            margin: 0;
            font-weight: bold;
        }
        
        .sidebar .brand small {
            opacity: 0.8;
        }
        
        .sidebar .nav {
            padding: 0;
        }
        
        .sidebar .nav-link {
            color: rgba(255, 255, 255, 0.8);
            padding: 15px 20px;
            border-radius: 0;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            display: flex;
            align-items: center;
        }
        
        .sidebar .nav-link:hover,
        .sidebar .nav-link.active {
            color: white;
            background: rgba(255, 255, 255, 0.1);
            border-left-color: white;
        }
        
        .sidebar .nav-link i {
            width: 20px;
            margin-right: 10px;
        }
        
        .main-content {
            margin-left: 200px;
            min-height: 100vh;
            background: #f8f9fa;
        }
        
        .header {
            background: white;
            padding: 20px 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-bottom: 1px solid #e9ecef;
        }
        
        .content-area {
            padding: 30px;
        }
        
        .card {
            border: none;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .card-header {
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
            padding: 15px 20px;
            font-weight: 600;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .login-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
        }
        
        .content-section {
            display: none;
        }
        
        .content-section.active {
            display: block;
        }
        
        .table th {
            background: #f8f9fa;
            border: none;
            font-weight: 600;
            color: #495057;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 8px;
            padding: 8px 16px;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
            transform: translateY(-1px);
        }
        
        .page-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid #e9ecef;
        }
        
        .page-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .page-card i {
            font-size: 3rem;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .logout-btn {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 20px;
        }
        
        .form-control:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
        }
        
        .badge {
            font-size: 0.75rem;
            padding: 4px 8px;
        }
        
        .table-responsive {
            border-radius: 8px;
            overflow: hidden;
        }
        
        .modal-content {
            border-radius: 15px;
            border: none;
        }
        
        .modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px 15px 0 0;
        }

        /* åª’ä½“ç®¡ç†æ ·å¼ */
        .upload-zone {
            border: 3px dashed #667eea;
            border-radius: 10px;
            padding: 60px 20px;
            text-align: center;
            background: #f8f9ff;
            transition: all 0.3s;
            cursor: pointer;
            margin-bottom: 30px;
        }

        .upload-zone.dragover {
            background: #e8ecff;
            border-color: #4f5fd9;
            transform: scale(1.02);
        }

        .upload-zone i {
            font-size: 48px;
            color: #667eea;
            margin-bottom: 15px;
        }

        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .image-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            transition: all 0.3s;
        }

        .image-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }

        .image-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .image-card-body {
            padding: 15px;
        }

        .image-card-title {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 5px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .image-card-info {
            font-size: 12px;
            color: #666;
            margin-bottom: 10px;
        }

        .stats-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        }

        .stats-card i {
            font-size: 36px;
            color: #667eea;
            margin-bottom: 10px;
        }

        .stats-card h3 {
            font-size: 32px;
            font-weight: bold;
            margin: 0;
        }

        .stats-card p {
            color: #666;
            margin: 0;
        }
    </style>
</head>
<body>
    <!-- ç™»å½•ç•Œé¢ -->
    <div id="login-section" class="login-container">
        <div class="login-card">
            <div class="text-center mb-4">
                <i class="fas fa-tv display-4" style="color: #667eea;"></i>
                <h3 class="mb-2">è”é”¦LEDç®¡ç†ç³»ç»Ÿ</h3>
                <p class="text-muted">Complete Chinese LED Admin System</p>
            </div>
            
            <form id="login-form">
                <div class="mb-3">
                    <label class="form-label">ç”¨æˆ·å</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="fas fa-user"></i></span>
                        <input type="text" class="form-control" id="username" value="admin" required>
                    </div>
                </div>
                <div class="mb-3">
                    <label class="form-label">å¯†ç </label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="fas fa-lock"></i></span>
                        <input type="password" class="form-control" id="password" value="admin123" required>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary w-100 py-2">
                    <i class="fas fa-sign-in-alt me-2"></i>ç™»å½•ç®¡ç†åå°
                </button>
            </form>
            
            <div class="mt-3 text-center">
                <small class="text-muted">é»˜è®¤è´¦å·: admin / admin123</small>
            </div>
        </div>
    </div>

    <!-- ç®¡ç†ç•Œé¢ -->
    <div id="admin-section" style="display: none;">
        <!-- ä¾§è¾¹æ  -->
        <div class="sidebar">
            <div class="brand">
                <h5>
                    <i class="fas fa-tv me-2"></i>
                    è”é”¦LED
                </h5>
                <small>ç®¡ç†ç³»ç»Ÿ</small>
            </div>
            
            <nav class="nav flex-column">
                <a class="nav-link active" href="#" data-section="dashboard">
                    <i class="fas fa-tachometer-alt"></i>ä»ªè¡¨ç›˜æ€»è§ˆ
                </a>
                <a class="nav-link" href="admin/page-editor.html" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; font-weight: bold; border-radius: 8px; margin: 5px 0;">
                    <i class="fas fa-edit"></i>ğŸ“„ é¡µé¢å¯è§†åŒ–ç¼–è¾‘å™¨ â­
                </a>
                <a class="nav-link" href="#" data-section="frontend">
                    <i class="fas fa-globe"></i>å‰ç«¯é¡µé¢ç®¡ç†
                </a>
                <a class="nav-link" href="#" data-section="products">
                    <i class="fas fa-cube"></i>äº§å“ç®¡ç†
                </a>
                <a class="nav-link" href="#" data-section="inquiries">
                    <i class="fas fa-envelope"></i>è¯¢ç›˜ç®¡ç†
                </a>
                <a class="nav-link" href="#" data-section="news">
                    <i class="fas fa-newspaper"></i>æ–°é—»ç®¡ç†
                </a>
                <a class="nav-link" href="#" data-section="media">
                    <i class="fas fa-images"></i>åª’ä½“ç®¡ç†ï¼ˆæ—§ç‰ˆï¼‰
                </a>
                <a class="nav-link" href="#" data-section="users">
                    <i class="fas fa-users"></i>ç”¨æˆ·ç®¡ç†
                </a>
                <a class="nav-link" href="#" data-section="settings">
                    <i class="fas fa-cog"></i>ç³»ç»Ÿè®¾ç½®
                </a>
                <a class="nav-link" href="#" data-section="statistics">
                    <i class="fas fa-chart-bar"></i>ç»Ÿè®¡åˆ†æ
                </a>
                <a class="nav-link" href="#" onclick="window.open('index.html', '_blank'); return false;">
                    <i class="fas fa-external-link-alt"></i>æŸ¥çœ‹å‰ç«¯ç½‘ç«™
                </a>
            </nav>
            
            <div class="logout-btn">
                <button class="btn btn-outline-light btn-sm w-100" onclick="logout()">
                    <i class="fas fa-sign-out-alt me-2"></i>é€€å‡ºç™»å½•
                </button>
            </div>
        </div>

        <!-- ä¸»å†…å®¹åŒº -->
        <div class="main-content">
            <!-- å¤´éƒ¨ -->
            <div class="header">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h4 class="mb-0" id="page-title">ä»ªè¡¨ç›˜æ€»è§ˆ</h4>
                        <small class="text-muted">Complete Chinese LED Admin System</small>
                    </div>
                    <div class="d-flex align-items-center">
                        <span class="text-muted me-2">æ¬¢è¿ï¼Œ</span>
                        <span class="fw-bold" id="admin-username">admin</span>
                        <span class="badge bg-success ms-2">åœ¨çº¿</span>
                    </div>
                </div>
            </div>

            <div class="content-area">
                <!-- ä»ªè¡¨ç›˜ -->
                <div id="dashboard-content" class="content-section active">
                    <div class="row mb-4">
                        <div class="col-md-3">
                            <div class="stat-card">
                                <div class="stat-number" id="stat-pages">8</div>
                                <div class="stat-label">é¡µé¢æ¨¡å—</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stat-card">
                                <div class="stat-number" id="stat-products">0</div>
                                <div class="stat-label">äº§å“æ•°é‡</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stat-card">
                                <div class="stat-number" id="stat-inquiries">0</div>
                                <div class="stat-label">è¯¢ç›˜æ•°é‡</div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stat-card">
                                <div class="stat-number" id="stat-news">0</div>
                                <div class="stat-label">æ–°é—»æ•°é‡</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="fas fa-envelope me-2"></i>æœ€æ–°è¯¢ç›˜</h5>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>å§“å</th>
                                            <th>é‚®ç®±</th>
                                            <th>å…¬å¸</th>
                                            <th>ç•™è¨€</th>
                                            <th>æ—¶é—´</th>
                                            <th>çŠ¶æ€</th>
                                        </tr>
                                    </thead>
                                    <tbody id="recent-inquiries">
                                        <tr>
                                            <td colspan="6" class="text-center text-muted py-4">æš‚æ— æ•°æ®</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- å‰ç«¯é¡µé¢ç®¡ç† -->
                <div id="frontend-content" class="content-section">
                    <div class="row">
                        <div class="col-md-4 mb-4">
                            <div class="page-card">
                                <i class="fas fa-home"></i>
                                <h6 class="mb-3">é¦–é¡µç®¡ç†</h6>
                                <p class="text-muted small mb-3">ç®¡ç†ç½‘ç«™é¦–é¡µå†…å®¹å’Œå¸ƒå±€</p>
                                <button class="btn btn-primary btn-sm" onclick="editPage('home')">
                                    <i class="fas fa-edit me-1"></i>ç¼–è¾‘å†…å®¹
                                </button>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="page-card">
                                <i class="fas fa-info-circle"></i>
                                <h6 class="mb-3">å…³äºæˆ‘ä»¬</h6>
                                <p class="text-muted small mb-3">ç®¡ç†å…¬å¸ä»‹ç»å’Œå›¢é˜Ÿä¿¡æ¯</p>
                                <button class="btn btn-primary btn-sm" onclick="editPage('about')">
                                    <i class="fas fa-edit me-1"></i>ç¼–è¾‘å†…å®¹
                                </button>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="page-card">
                                <i class="fas fa-cube"></i>
                                <h6 class="mb-3">äº§å“ä¸­å¿ƒ</h6>
                                <p class="text-muted small mb-3">ç®¡ç†äº§å“å±•ç¤ºé¡µé¢å†…å®¹</p>
                                <button class="btn btn-primary btn-sm" onclick="editPage('products')">
                                    <i class="fas fa-edit me-1"></i>ç¼–è¾‘å†…å®¹
                                </button>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="page-card">
                                <i class="fas fa-lightbulb"></i>
                                <h6 class="mb-3">è§£å†³æ–¹æ¡ˆ</h6>
                                <p class="text-muted small mb-3">ç®¡ç†è¡Œä¸šè§£å†³æ–¹æ¡ˆå†…å®¹</p>
                                <button class="btn btn-primary btn-sm" onclick="editPage('solutions')">
                                    <i class="fas fa-edit me-1"></i>ç¼–è¾‘å†…å®¹
                                </button>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="page-card">
                                <i class="fas fa-briefcase"></i>
                                <h6 class="mb-3">æˆåŠŸæ¡ˆä¾‹</h6>
                                <p class="text-muted small mb-3">ç®¡ç†é¡¹ç›®æ¡ˆä¾‹å±•ç¤º</p>
                                <button class="btn btn-primary btn-sm" onclick="editPage('cases')">
                                    <i class="fas fa-edit me-1"></i>ç¼–è¾‘å†…å®¹
                                </button>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="page-card">
                                <i class="fas fa-newspaper"></i>
                                <h6 class="mb-3">æ–°é—»èµ„è®¯</h6>
                                <p class="text-muted small mb-3">ç®¡ç†æ–°é—»å‘å¸ƒé¡µé¢</p>
                                <button class="btn btn-primary btn-sm" onclick="editPage('news')">
                                    <i class="fas fa-edit me-1"></i>ç¼–è¾‘å†…å®¹
                                </button>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="page-card">
                                <i class="fas fa-life-ring"></i>
                                <h6 class="mb-3">æŠ€æœ¯æ”¯æŒ</h6>
                                <p class="text-muted small mb-3">ç®¡ç†æŠ€æœ¯æ–‡æ¡£å’Œæ”¯æŒ</p>
                                <button class="btn btn-primary btn-sm" onclick="editPage('support')">
                                    <i class="fas fa-edit me-1"></i>ç¼–è¾‘å†…å®¹
                                </button>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="page-card">
                                <i class="fas fa-envelope"></i>
                                <h6 class="mb-3">è”ç³»æˆ‘ä»¬</h6>
                                <p class="text-muted small mb-3">ç®¡ç†è”ç³»ä¿¡æ¯å’Œè¡¨å•</p>
                                <button class="btn btn-primary btn-sm" onclick="editPage('contact')">
                                    <i class="fas fa-edit me-1"></i>ç¼–è¾‘å†…å®¹
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- äº§å“ç®¡ç† -->
                <div id="products-content" class="content-section">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0"><i class="fas fa-cube me-2"></i>äº§å“ç®¡ç†</h5>
                            <button class="btn btn-primary btn-sm" onclick="addProduct()">
                                <i class="fas fa-plus me-2"></i>æ·»åŠ äº§å“
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>äº§å“åç§°</th>
                                            <th>åˆ†ç±»</th>
                                            <th>ä»·æ ¼</th>
                                            <th>çŠ¶æ€</th>
                                            <th>åˆ›å»ºæ—¶é—´</th>
                                            <th>æ“ä½œ</th>
                                        </tr>
                                    </thead>
                                    <tbody id="products-table">
                                        <tr>
                                            <td colspan="7" class="text-center text-muted py-4">æš‚æ— æ•°æ®</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- è¯¢ç›˜ç®¡ç† -->
                <div id="inquiries-content" class="content-section">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="fas fa-envelope me-2"></i>è¯¢ç›˜ç®¡ç†</h5>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>å§“å</th>
                                            <th>é‚®ç®±</th>
                                            <th>å…¬å¸</th>
                                            <th>ç”µè¯</th>
                                            <th>çŠ¶æ€</th>
                                            <th>æ—¶é—´</th>
                                            <th>æ“ä½œ</th>
                                        </tr>
                                    </thead>
                                    <tbody id="inquiries-table">
                                        <tr>
                                            <td colspan="8" class="text-center text-muted py-4">æš‚æ— æ•°æ®</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æ–°é—»ç®¡ç† -->
                <div id="news-content" class="content-section">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0"><i class="fas fa-newspaper me-2"></i>æ–°é—»ç®¡ç†</h5>
                            <button class="btn btn-primary btn-sm" onclick="addNews()">
                                <i class="fas fa-plus me-2"></i>æ·»åŠ æ–°é—»
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>æ ‡é¢˜</th>
                                            <th>ä½œè€…</th>
                                            <th>çŠ¶æ€</th>
                                            <th>æ—¶é—´</th>
                                            <th>æ“ä½œ</th>
                                        </tr>
                                    </thead>
                                    <tbody id="news-table">
                                        <tr>
                                            <td colspan="6" class="text-center text-muted py-4">æš‚æ— æ•°æ®</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ç”¨æˆ·ç®¡ç† -->
                <div id="users-content" class="content-section">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0"><i class="fas fa-users me-2"></i>ç”¨æˆ·ç®¡ç†</h5>
                            <button class="btn btn-primary btn-sm" onclick="addUser()">
                                <i class="fas fa-plus me-2"></i>æ·»åŠ ç”¨æˆ·
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>ç”¨æˆ·å</th>
                                            <th>é‚®ç®±</th>
                                            <th>è§’è‰²</th>
                                            <th>çŠ¶æ€</th>
                                            <th>æœ€åç™»å½•</th>
                                            <th>æ“ä½œ</th>
                                        </tr>
                                    </thead>
                                    <tbody id="users-table">
                                        <tr>
                                            <td colspan="7" class="text-center text-muted py-4">æš‚æ— æ•°æ®</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ç³»ç»Ÿè®¾ç½® -->
                <div id="settings-content" class="content-section">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0"><i class="fas fa-cog me-2"></i>ç³»ç»Ÿè®¾ç½®</h5>
                        </div>
                        <div class="card-body">
                            <form id="settings-form">
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">ç½‘ç«™åç§°</label>
                                            <input type="text" class="form-control" id="site_name" value="è”é”¦LEDæ˜¾ç¤ºå±">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">è”ç³»é‚®ç®±</label>
                                            <input type="email" class="form-control" id="contact_email" value="info@lianjinled.com">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">è”ç³»ç”µè¯</label>
                                            <input type="text" class="form-control" id="contact_phone" value="+86-755-12345678">
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="mb-3">
                                            <label class="form-label">å…¬å¸åœ°å€</label>
                                            <input type="text" class="form-control" id="company_address" value="æ·±åœ³å¸‚å—å±±åŒºç§‘æŠ€å›­">
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <div class="mb-3">
                                            <label class="form-label">ç½‘ç«™æè¿°</label>
                                            <textarea class="form-control" id="site_description" rows="3">ä¸“ä¸šLEDæ˜¾ç¤ºå±åˆ¶é€ å•†</textarea>
                                        </div>
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save me-2"></i>ä¿å­˜è®¾ç½®
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- ç»Ÿè®¡åˆ†æ -->
                <div id="statistics-content" class="content-section">
                    <!-- æ•°æ®æ¦‚è§ˆ -->
                    <div class="row mb-4">
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <i class="fas fa-envelope fa-2x text-primary mb-2"></i>
                                    <h3 class="text-primary" id="total-inquiries">0</h3>
                                    <p class="mb-0">æ€»è¯¢ç›˜æ•°</p>
                                    <small class="text-muted">æœ¬æœˆæ–°å¢: <span id="month-inquiries">0</span></small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <i class="fas fa-cube fa-2x text-success mb-2"></i>
                                    <h3 class="text-success" id="total-products">0</h3>
                                    <p class="mb-0">æ€»äº§å“æ•°</p>
                                    <small class="text-muted">å·²å‘å¸ƒ: <span id="active-products">0</span></small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <i class="fas fa-newspaper fa-2x text-info mb-2"></i>
                                    <h3 class="text-info" id="total-news">0</h3>
                                    <p class="mb-0">æ€»æ–°é—»æ•°</p>
                                    <small class="text-muted">æœ¬å‘¨æ›´æ–°: <span id="week-news">0</span></small>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <i class="fas fa-users fa-2x text-warning mb-2"></i>
                                    <h3 class="text-warning" id="total-users">1</h3>
                                    <p class="mb-0">æ€»ç”¨æˆ·æ•°</p>
                                    <small class="text-muted">æ´»è·ƒç”¨æˆ·: <span id="active-users">1</span></small>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- è¯¢ç›˜è¶‹åŠ¿å›¾è¡¨ -->
                    <div class="row mb-4">
                        <div class="col-md-8">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0"><i class="fas fa-chart-line me-2"></i>è¯¢ç›˜è¶‹åŠ¿ï¼ˆæœ€è¿‘7å¤©ï¼‰</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="inquiryChart" height="100"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0"><i class="fas fa-chart-pie me-2"></i>äº§å“åˆ†ç±»åˆ†å¸ƒ</h5>
                                </div>
                                <div class="card-body">
                                    <canvas id="productChart" height="200"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- è¯¦ç»†æ•°æ®è¡¨æ ¼ -->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0"><i class="fas fa-clock me-2"></i>æœ€è¿‘æ´»åŠ¨è®°å½•</h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-sm">
                                            <thead>
                                                <tr>
                                                    <th>æ—¶é—´</th>
                                                    <th>ç±»å‹</th>
                                                    <th>æè¿°</th>
                                                </tr>
                                            </thead>
                                            <tbody id="activity-log">
                                                <tr>
                                                    <td>2024-01-14 10:30</td>
                                                    <td><span class="badge bg-primary">è¯¢ç›˜</span></td>
                                                    <td>æ–°è¯¢ç›˜æ¥è‡ªå®¢æˆ·å¼ å…ˆç”Ÿ</td>
                                                </tr>
                                                <tr>
                                                    <td>2024-01-14 09:15</td>
                                                    <td><span class="badge bg-success">äº§å“</span></td>
                                                    <td>æ·»åŠ æ–°äº§å“ P2.5å®¤å†…å±</td>
                                                </tr>
                                                <tr>
                                                    <td>2024-01-13 16:20</td>
                                                    <td><span class="badge bg-info">æ–°é—»</span></td>
                                                    <td>å‘å¸ƒæ–°é—»ã€ŠLEDæ˜¾ç¤ºæŠ€æœ¯åˆ›æ–°ã€‹</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0"><i class="fas fa-trophy me-2"></i>çƒ­é—¨äº§å“æ’è¡Œ</h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-sm">
                                            <thead>
                                                <tr>
                                                    <th>æ’å</th>
                                                    <th>äº§å“åç§°</th>
                                                    <th>æµè§ˆé‡</th>
                                                    <th>è¯¢ç›˜æ•°</th>
                                                </tr>
                                            </thead>
                                            <tbody id="hot-products">
                                                <tr>
                                                    <td>1</td>
                                                    <td>P2.5å®¤å†…é«˜æ¸…å±</td>
                                                    <td>1,258</td>
                                                    <td>23</td>
                                                </tr>
                                                <tr>
                                                    <td>2</td>
                                                    <td>P4æˆ·å¤–å…¨å½©å±</td>
                                                    <td>986</td>
                                                    <td>18</td>
                                                </tr>
                                                <tr>
                                                    <td>3</td>
                                                    <td>é€æ˜LEDæ˜¾ç¤ºå±</td>
                                                    <td>752</td>
                                                    <td>15</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- åª’ä½“ç®¡ç† -->
                <div id="media-content" class="content-section">
                    <h3 class="mb-4">ğŸ“¸ åª’ä½“ç®¡ç†</h3>

                    <!-- ç»Ÿè®¡ä¿¡æ¯ -->
                    <div class="row mb-4">
                        <div class="col-md-3">
                            <div class="stats-card">
                                <i class="fas fa-images"></i>
                                <h3 id="totalMediaImages">0</h3>
                                <p>æ€»å›¾ç‰‡æ•°</p>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stats-card">
                                <i class="fas fa-folder"></i>
                                <h3 id="totalMediaCategories">10</h3>
                                <p>åˆ†ç±»æ•°é‡</p>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stats-card">
                                <i class="fas fa-hdd"></i>
                                <h3 id="totalMediaSize">0 MB</h3>
                                <p>æ€»å­˜å‚¨ç©ºé—´</p>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="stats-card">
                                <i class="fas fa-clock"></i>
                                <h3 id="recentMediaUploads">0</h3>
                                <p>æœ¬æœˆä¸Šä¼ </p>
                            </div>
                        </div>
                    </div>

                    <!-- ä¸Šä¼ åŒºåŸŸ -->
                    <div class="card mb-4">
                        <div class="card-body">
                            <h5 class="card-title mb-3">ğŸ“¤ ä¸Šä¼ å›¾ç‰‡åˆ°æŒ‡å®šä½ç½®</h5>

                            <!-- é¡µé¢é€‰æ‹© -->
                            <div class="row mb-3">
                                <div class="col-md-4">
                                    <label class="form-label fw-bold">1. é€‰æ‹©é¡µé¢</label>
                                    <select class="form-select" id="mediaPageSelect" onchange="updateMediaLocations()">
                                        <option value="">-- è¯·é€‰æ‹©é¡µé¢ --</option>
                                        <option value="index">é¦–é¡µ (index.html)</option>
                                        <option value="products">äº§å“é¡µ (products.html)</option>
                                        <option value="about">å…³äºæˆ‘ä»¬ (about.html)</option>
                                        <option value="contact">è”ç³»æˆ‘ä»¬ (contact.html)</option>
                                        <option value="news">æ–°é—»é¡µ (news.html)</option>
                                    </select>
                                </div>

                                <!-- ä½ç½®é€‰æ‹© -->
                                <div class="col-md-4">
                                    <label class="form-label fw-bold">2. é€‰æ‹©ä½ç½®</label>
                                    <select class="form-select" id="mediaLocationSelect" onchange="updateMediaPreviewInfo()" disabled>
                                        <option value="">-- å…ˆé€‰æ‹©é¡µé¢ --</option>
                                    </select>
                                </div>

                                <!-- é¢„è§ˆæŒ‰é’® -->
                                <div class="col-md-4">
                                    <label class="form-label fw-bold">3. é¢„è§ˆä½ç½®</label>
                                    <button class="btn btn-outline-primary w-100" id="mediaPreviewLocationBtn" onclick="previewFrontendLocation()" disabled>
                                        <i class="fas fa-eye"></i> æŸ¥çœ‹å‰ç«¯ä½ç½®
                                    </button>
                                </div>
                            </div>

                            <!-- ä½ç½®ä¿¡æ¯æç¤º -->
                            <div id="mediaLocationInfo" class="alert alert-info" style="display: none;">
                                <i class="fas fa-info-circle"></i>
                                <strong>ä¸Šä¼ ä½ç½®ï¼š</strong>
                                <span id="mediaLocationDesc"></span>
                                <br>
                                <small class="text-muted" id="mediaLocationDetail"></small>
                            </div>

                            <!-- ä¸Šä¼ åŒºåŸŸ -->
                            <div class="upload-zone" id="mediaUploadZone">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <h5>æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„ä¸Šä¼ </h5>
                                <p class="text-muted">æˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶</p>
                                <p class="text-muted"><small>æ”¯æŒ JPG, PNG, WebP æ ¼å¼ï¼Œå»ºè®®å¤§å°ä¸è¶…è¿‡ 2MB</small></p>
                                <input type="file" id="mediaFileInput" multiple accept="image/*" style="display: none;">
                            </div>
                            <div id="mediaUploadPreview" style="display: none;">
                                <h6 class="mt-3">å¾…ä¸Šä¼ æ–‡ä»¶ï¼š</h6>
                                <div id="mediaPreviewList"></div>
                                <div class="mt-3">
                                    <button class="btn btn-primary" id="mediaUploadBtn">
                                        <i class="fas fa-upload"></i> ä¸Šä¼ å…¨éƒ¨
                                    </button>
                                    <button class="btn btn-secondary" id="mediaClearBtn">
                                        <i class="fas fa-times"></i> æ¸…ç©ºåˆ—è¡¨
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- å›¾ç‰‡åˆ—è¡¨ -->
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 class="card-title mb-0">å›¾ç‰‡åº“</h5>
                                <button class="btn btn-sm btn-outline-primary" onclick="loadMediaImages()">
                                    <i class="fas fa-sync"></i> åˆ·æ–°
                                </button>
                            </div>
                            <div id="mediaImageGrid" class="image-grid">
                                <div class="text-center py-5 text-muted">
                                    <i class="fas fa-images fa-3x mb-3"></i>
                                    <p>æš‚æ— å›¾ç‰‡ï¼Œè¯·å…ˆä¸Šä¼ </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ç¼–è¾‘é¡µé¢å†…å®¹æ¨¡æ€æ¡† -->
    <div class="modal fade" id="editPageModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">ç¼–è¾‘é¡µé¢å†…å®¹</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="page-edit-form">
                        <div class="mb-3">
                            <label class="form-label">é¡µé¢æ ‡é¢˜</label>
                            <input type="text" class="form-control" id="page-title-input">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">é¡µé¢å‰¯æ ‡é¢˜</label>
                            <input type="text" class="form-control" id="page-subtitle-input">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">é¡µé¢å†…å®¹</label>
                            <textarea class="form-control" id="page-content-input" rows="6"></textarea>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">é¡µé¢å›¾ç‰‡URL</label>
                            <input type="text" class="form-control" id="page-image-input">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">å–æ¶ˆ</button>
                    <button type="button" class="btn btn-primary" onclick="savePageContent()">ä¿å­˜å†…å®¹</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Supabaseå®¢æˆ·ç«¯ -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="js/frontend-backend-api.js"></script>
    <script src="js/admin-system-complete.js"></script>
    <!-- é¡µé¢å†…å®¹ç¼–è¾‘å™¨ -->
    <script src="js/admin-page-editor.js"></script>
    <!-- åª’ä½“ç®¡ç†åŠŸèƒ½ -->
    <script>
        // åª’ä½“ç®¡ç†å…¨å±€å˜é‡
        let mediaPendingFiles = []
        let mediaSupabaseClient = null
        let currentMediaLocation = null

        // å‰ç«¯é¡µé¢ä½ç½®æ˜ å°„é…ç½®
        const mediaLocationMap = {
            index: {
                name: 'é¦–é¡µ',
                locations: [
                    { id: 'hero-banner-1', name: 'Heroè½®æ’­å›¾1', path: '/', element: '.carousel-item:nth-child(1) img', desc: 'é¦–é¡µé¡¶éƒ¨è½®æ’­å›¾ç¬¬1å¼ ', size: '1920x800px' },
                    { id: 'hero-banner-2', name: 'Heroè½®æ’­å›¾2', path: '/', element: '.carousel-item:nth-child(2) img', desc: 'é¦–é¡µé¡¶éƒ¨è½®æ’­å›¾ç¬¬2å¼ ', size: '1920x800px' },
                    { id: 'hero-banner-3', name: 'Heroè½®æ’­å›¾3', path: '/', element: '.carousel-item:nth-child(3) img', desc: 'é¦–é¡µé¡¶éƒ¨è½®æ’­å›¾ç¬¬3å¼ ', size: '1920x800px' },
                    { id: 'product-indoor-p25', name: 'äº§å“å¡ç‰‡ - Indoor P2.5', path: '/#products', element: '.product-card:nth-child(1) img', desc: 'Indoor LED Display P2.5 äº§å“ä¸»å›¾', size: '400x300px' },
                    { id: 'product-outdoor-p10', name: 'äº§å“å¡ç‰‡ - Outdoor P10', path: '/#products', element: '.product-card:nth-child(2) img', desc: 'Outdoor LED Display P10 äº§å“ä¸»å›¾', size: '400x300px' },
                    { id: 'product-rental-p391', name: 'äº§å“å¡ç‰‡ - Rental P3.91', path: '/#products', element: '.product-card:nth-child(3) img', desc: 'Rental LED Display P3.91 äº§å“ä¸»å›¾', size: '400x300px' },
                    { id: 'product-transparent', name: 'äº§å“å¡ç‰‡ - Transparent LED', path: '/#products', element: '.product-card:nth-child(4) img', desc: 'Transparent LED Display äº§å“ä¸»å›¾', size: '400x300px' },
                    { id: 'product-creative', name: 'äº§å“å¡ç‰‡ - Creative LED', path: '/#products', element: '.product-card:nth-child(5) img', desc: 'Creative LED Display äº§å“ä¸»å›¾', size: '400x300px' },
                    { id: 'product-fine-pitch', name: 'äº§å“å¡ç‰‡ - Fine Pitch', path: '/#products', element: '.product-card:nth-child(6) img', desc: 'Fine Pitch LED Display äº§å“ä¸»å›¾', size: '400x300px' },
                    { id: 'company-logo', name: 'å…¬å¸Logo', path: '/', element: '.navbar-brand img', desc: 'ç½‘ç«™é¡¶éƒ¨å¯¼èˆªæ Logo', size: '200x50px' },
                    { id: 'about-section-bg', name: 'å…³äºæˆ‘ä»¬èƒŒæ™¯å›¾', path: '/#about', element: '.about-section', desc: 'å…³äºæˆ‘ä»¬sectionèƒŒæ™¯å›¾', size: '1920x600px' }
                ]
            },
            products: {
                name: 'äº§å“é¡µ',
                locations: [
                    { id: 'product-page-indoor-main', name: 'Indoor P2.5 ä¸»å›¾', path: '/products.html#indoor', element: '#indoor-p25-main', desc: 'Indoor P2.5 äº§å“è¯¦æƒ…ä¸»å›¾', size: '800x600px' },
                    { id: 'product-page-indoor-detail-1', name: 'Indoor P2.5 ç»†èŠ‚å›¾1', path: '/products.html#indoor', element: '#indoor-p25-detail-1', desc: 'Indoor P2.5 äº§å“ç»†èŠ‚å›¾1', size: '600x450px' },
                    { id: 'product-page-indoor-detail-2', name: 'Indoor P2.5 ç»†èŠ‚å›¾2', path: '/products.html#indoor', element: '#indoor-p25-detail-2', desc: 'Indoor P2.5 äº§å“ç»†èŠ‚å›¾2', size: '600x450px' },
                    { id: 'product-page-outdoor-main', name: 'Outdoor P10 ä¸»å›¾', path: '/products.html#outdoor', element: '#outdoor-p10-main', desc: 'Outdoor P10 äº§å“è¯¦æƒ…ä¸»å›¾', size: '800x600px' },
                    { id: 'product-page-rental-main', name: 'Rental P3.91 ä¸»å›¾', path: '/products.html#rental', element: '#rental-p391-main', desc: 'Rental P3.91 äº§å“è¯¦æƒ…ä¸»å›¾', size: '800x600px' },
                    { id: 'product-page-transparent-main', name: 'Transparent LED ä¸»å›¾', path: '/products.html#transparent', element: '#transparent-main', desc: 'Transparent LED äº§å“è¯¦æƒ…ä¸»å›¾', size: '800x600px' },
                    { id: 'product-page-creative-main', name: 'Creative LED ä¸»å›¾', path: '/products.html#creative', element: '#creative-main', desc: 'Creative LED äº§å“è¯¦æƒ…ä¸»å›¾', size: '800x600px' },
                    { id: 'product-page-fine-pitch-main', name: 'Fine Pitch ä¸»å›¾', path: '/products.html#fine-pitch', element: '#fine-pitch-main', desc: 'Fine Pitch LED äº§å“è¯¦æƒ…ä¸»å›¾', size: '800x600px' }
                ]
            },
            about: {
                name: 'å…³äºæˆ‘ä»¬',
                locations: [
                    { id: 'about-hero-image', name: 'å…³äºæˆ‘ä»¬ä¸»å›¾', path: '/about.html', element: '.about-hero img', desc: 'å…³äºæˆ‘ä»¬é¡µé¢é¡¶éƒ¨ä¸»å›¾', size: '1920x600px' },
                    { id: 'company-building', name: 'å…¬å¸å¤§æ¥¼ç…§ç‰‡', path: '/about.html#company', element: '.company-building img', desc: 'å…¬å¸åŠå…¬å¤§æ¥¼å¤–æ™¯', size: '800x600px' },
                    { id: 'factory-workshop', name: 'å·¥å‚è½¦é—´ç…§ç‰‡', path: '/about.html#company', element: '.factory-workshop img', desc: 'ç”Ÿäº§è½¦é—´å†…æ™¯', size: '800x600px' },
                    { id: 'team-ceo', name: 'CEOç…§ç‰‡', path: '/about.html#team', element: '.team-member:nth-child(1) img', desc: 'CEO/æ€»ç»ç†ç…§ç‰‡', size: '300x400px' },
                    { id: 'team-member-1', name: 'å›¢é˜Ÿæˆå‘˜1', path: '/about.html#team', element: '.team-member:nth-child(2) img', desc: 'å›¢é˜Ÿæ ¸å¿ƒæˆå‘˜ç…§ç‰‡', size: '300x400px' },
                    { id: 'team-member-2', name: 'å›¢é˜Ÿæˆå‘˜2', path: '/about.html#team', element: '.team-member:nth-child(3) img', desc: 'å›¢é˜Ÿæ ¸å¿ƒæˆå‘˜ç…§ç‰‡', size: '300x400px' },
                    { id: 'certificate-iso', name: 'ISOè®¤è¯è¯ä¹¦', path: '/about.html#certificates', element: '.certificate-iso img', desc: 'ISOè´¨é‡è®¤è¯è¯ä¹¦', size: '600x800px' },
                    { id: 'certificate-ce', name: 'CEè®¤è¯è¯ä¹¦', path: '/about.html#certificates', element: '.certificate-ce img', desc: 'CEäº§å“è®¤è¯è¯ä¹¦', size: '600x800px' }
                ]
            },
            contact: {
                name: 'è”ç³»æˆ‘ä»¬',
                locations: [
                    { id: 'contact-hero', name: 'è”ç³»æˆ‘ä»¬ä¸»å›¾', path: '/contact.html', element: '.contact-hero img', desc: 'è”ç³»æˆ‘ä»¬é¡µé¢é¡¶éƒ¨å›¾ç‰‡', size: '1920x500px' },
                    { id: 'office-location-map', name: 'åŠå…¬åœ°ç‚¹åœ°å›¾', path: '/contact.html#map', element: '.office-map img', desc: 'åŠå…¬å®¤ä½ç½®åœ°å›¾æˆªå›¾', size: '800x600px' }
                ]
            },
            news: {
                name: 'æ–°é—»é¡µ',
                locations: [
                    { id: 'news-hero', name: 'æ–°é—»é¡µä¸»å›¾', path: '/news.html', element: '.news-hero img', desc: 'æ–°é—»é¡µé¢é¡¶éƒ¨å›¾ç‰‡', size: '1920x500px' },
                    { id: 'news-article-1', name: 'æ–°é—»æ–‡ç« 1é…å›¾', path: '/news.html', element: '.news-article:nth-child(1) img', desc: 'ç¬¬1ç¯‡æ–°é—»æ–‡ç« é…å›¾', size: '600x400px' },
                    { id: 'news-article-2', name: 'æ–°é—»æ–‡ç« 2é…å›¾', path: '/news.html', element: '.news-article:nth-child(2) img', desc: 'ç¬¬2ç¯‡æ–°é—»æ–‡ç« é…å›¾', size: '600x400px' },
                    { id: 'news-article-3', name: 'æ–°é—»æ–‡ç« 3é…å›¾', path: '/news.html', element: '.news-article:nth-child(3) img', desc: 'ç¬¬3ç¯‡æ–°é—»æ–‡ç« é…å›¾', size: '600x400px' }
                ]
            }
        }

        // æ›´æ–°ä½ç½®é€‰æ‹©ä¸‹æ‹‰èœå•
        function updateMediaLocations() {
            const pageSelect = document.getElementById('mediaPageSelect')
            const locationSelect = document.getElementById('mediaLocationSelect')
            const previewBtn = document.getElementById('mediaPreviewLocationBtn')
            const locationInfo = document.getElementById('mediaLocationInfo')

            const selectedPage = pageSelect.value

            if (!selectedPage) {
                locationSelect.disabled = true
                locationSelect.innerHTML = '<option value="">-- å…ˆé€‰æ‹©é¡µé¢ --</option>'
                previewBtn.disabled = true
                locationInfo.style.display = 'none'
                return
            }

            // å¡«å……ä½ç½®é€‰é¡¹
            const locations = mediaLocationMap[selectedPage].locations
            locationSelect.innerHTML = '<option value="">-- è¯·é€‰æ‹©ä¸Šä¼ ä½ç½® --</option>'

            locations.forEach(loc => {
                const option = document.createElement('option')
                option.value = loc.id
                option.textContent = loc.name
                option.dataset.location = JSON.stringify(loc)
                locationSelect.appendChild(option)
            })

            locationSelect.disabled = false
            locationInfo.style.display = 'none'
        }

        // æ›´æ–°ä½ç½®ä¿¡æ¯é¢„è§ˆ
        function updateMediaPreviewInfo() {
            const locationSelect = document.getElementById('mediaLocationSelect')
            const previewBtn = document.getElementById('mediaPreviewLocationBtn')
            const locationInfo = document.getElementById('mediaLocationInfo')
            const locationDesc = document.getElementById('mediaLocationDesc')
            const locationDetail = document.getElementById('mediaLocationDetail')

            const selectedOption = locationSelect.options[locationSelect.selectedIndex]

            if (!selectedOption || !selectedOption.dataset.location) {
                previewBtn.disabled = true
                locationInfo.style.display = 'none'
                currentMediaLocation = null
                return
            }

            const location = JSON.parse(selectedOption.dataset.location)
            currentMediaLocation = location

            // æ˜¾ç¤ºä½ç½®ä¿¡æ¯
            locationDesc.textContent = location.name
            locationDetail.textContent = `é¡µé¢: ${location.path} | ä½ç½®: ${location.desc} | å»ºè®®å°ºå¯¸: ${location.size}`
            locationInfo.style.display = 'block'
            previewBtn.disabled = false
        }

        // é¢„è§ˆå‰ç«¯ä½ç½®
        function previewFrontendLocation() {
            if (!currentMediaLocation) {
                alert('è¯·å…ˆé€‰æ‹©è¦ä¸Šä¼ çš„ä½ç½®')
                return
            }

            // åœ¨æ–°çª—å£ä¸­æ‰“å¼€å‰ç«¯é¡µé¢
            const frontendUrl = window.location.origin + currentMediaLocation.path
            const previewWindow = window.open(frontendUrl, '_blank')

            // å°è¯•é«˜äº®æ˜¾ç¤ºå…ƒç´ ï¼ˆå¦‚æœå¯ä»¥è®¿é—®çš„è¯ï¼‰
            if (previewWindow) {
                setTimeout(() => {
                    try {
                        const element = previewWindow.document.querySelector(currentMediaLocation.element)
                        if (element) {
                            element.scrollIntoView({ behavior: 'smooth', block: 'center' })
                            element.style.outline = '3px solid #667eea'
                            element.style.outlineOffset = '5px'
                            setTimeout(() => {
                                element.style.outline = ''
                                element.style.outlineOffset = ''
                            }, 3000)
                        }
                    } catch (e) {
                        console.log('æ— æ³•è®¿é—®é¢„è§ˆçª—å£DOMï¼ˆè·¨åŸŸé™åˆ¶ï¼‰')
                    }
                }, 1000)
            }

            alert(`å·²åœ¨æ–°çª—å£æ‰“å¼€å‰ç«¯é¡µé¢\n\nä½ç½®ï¼š${currentMediaLocation.desc}\nå»ºè®®å°ºå¯¸ï¼š${currentMediaLocation.size}\n\næ³¨æ„ï¼šä¸Šä¼ çš„å›¾ç‰‡å°†æ›¿æ¢è¯¥ä½ç½®çš„å›¾ç‰‡`)
        }

        // åˆå§‹åŒ–åª’ä½“ç®¡ç† Supabase å®¢æˆ·ç«¯
        function initMediaSupabase() {
            if (!window.supabase) {
                console.error('âŒ Supabase SDK æœªåŠ è½½')
                return false
            }

            const { createClient } = window.supabase
            const supabaseUrl = 'https://jirudzbqcxviytcmxegf.supabase.co'
            const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImppcnVkemJxY3h2aXl0Y214ZWdmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ0NTExOTUsImV4cCI6MjA3MDAyNzE5NX0.qi0YhrxQmbRa6YsbVA13IpddImIjJKJyd1fgz5jIlt4'

            mediaSupabaseClient = createClient(supabaseUrl, supabaseKey)
            console.log('âœ… åª’ä½“ç®¡ç† Supabase å®¢æˆ·ç«¯åˆå§‹åŒ–æˆåŠŸ')
            return true
        }

        // åª’ä½“ç®¡ç†åˆå§‹åŒ–
        function initMediaManager() {
            console.log('ğŸ¬ åˆå§‹åŒ–åª’ä½“ç®¡ç†...')

            if (!initMediaSupabase()) {
                console.warn('âš ï¸ Supabase æœªåˆå§‹åŒ–ï¼Œåª’ä½“ç®¡ç†åŠŸèƒ½å¯èƒ½å—é™')
            }

            const uploadZone = document.getElementById('mediaUploadZone')
            const fileInput = document.getElementById('mediaFileInput')

            if (!uploadZone || !fileInput) {
                console.warn('âš ï¸ åª’ä½“ç®¡ç†å…ƒç´ æœªæ‰¾åˆ°')
                return
            }

            // ä¸Šä¼ åŒºåŸŸç‚¹å‡»
            uploadZone.addEventListener('click', () => fileInput.click())

            // æ–‡ä»¶é€‰æ‹©
            fileInput.addEventListener('change', handleMediaFileSelect)

            // æ‹–æ‹½ä¸Šä¼ 
            uploadZone.addEventListener('dragover', (e) => {
                e.preventDefault()
                uploadZone.classList.add('dragover')
            })

            uploadZone.addEventListener('dragleave', () => {
                uploadZone.classList.remove('dragover')
            })

            uploadZone.addEventListener('drop', (e) => {
                e.preventDefault()
                uploadZone.classList.remove('dragover')
                const files = Array.from(e.dataTransfer.files)
                handleMediaFiles(files)
            })

            // ä¸Šä¼ å’Œæ¸…ç©ºæŒ‰é’®
            const uploadBtn = document.getElementById('mediaUploadBtn')
            const clearBtn = document.getElementById('mediaClearBtn')
            if (uploadBtn) uploadBtn.addEventListener('click', uploadMediaFiles)
            if (clearBtn) clearBtn.addEventListener('click', clearMediaFiles)

            console.log('âœ… åª’ä½“ç®¡ç†åˆå§‹åŒ–å®Œæˆ')
        }

        // å¤„ç†æ–‡ä»¶é€‰æ‹©
        function handleMediaFileSelect(e) {
            const files = Array.from(e.target.files)
            handleMediaFiles(files)
        }

        // å¤„ç†æ–‡ä»¶
        function handleMediaFiles(files) {
            if (files.length === 0) return

            mediaPendingFiles = [...mediaPendingFiles, ...files]
            displayMediaPreview()

            document.getElementById('mediaUploadPreview').style.display = 'block'
        }

        // æ˜¾ç¤ºé¢„è§ˆ
        function displayMediaPreview() {
            const previewList = document.getElementById('mediaPreviewList')
            previewList.innerHTML = ''

            mediaPendingFiles.forEach((file, index) => {
                const reader = new FileReader()
                reader.onload = (e) => {
                    const preview = document.createElement('div')
                    preview.className = 'border rounded p-2 mb-2 d-flex align-items-center'
                    preview.innerHTML = `
                        <img src="${e.target.result}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 5px;" class="me-3">
                        <div class="flex-grow-1">
                            <div class="fw-bold">${file.name}</div>
                            <small class="text-muted">${(file.size / 1024).toFixed(2)} KB</small>
                        </div>
                        <button class="btn btn-sm btn-danger" onclick="removeMediaFile(${index})">
                            <i class="fas fa-times"></i>
                        </button>
                    `
                    previewList.appendChild(preview)
                }
                reader.readAsDataURL(file)
            })
        }

        // ç§»é™¤æ–‡ä»¶
        function removeMediaFile(index) {
            mediaPendingFiles.splice(index, 1)
            displayMediaPreview()
            if (mediaPendingFiles.length === 0) {
                document.getElementById('mediaUploadPreview').style.display = 'none'
            }
        }

        // æ¸…ç©ºæ–‡ä»¶
        function clearMediaFiles() {
            mediaPendingFiles = []
            document.getElementById('mediaFileInput').value = ''
            document.getElementById('mediaUploadPreview').style.display = 'none'
        }

        // ä¸Šä¼ æ–‡ä»¶
        async function uploadMediaFiles() {
            if (mediaPendingFiles.length === 0) {
                alert('è¯·å…ˆé€‰æ‹©è¦ä¸Šä¼ çš„æ–‡ä»¶')
                return
            }

            if (!currentMediaLocation) {
                alert('è¯·å…ˆé€‰æ‹©è¦ä¸Šä¼ åˆ°çš„é¡µé¢ä½ç½®')
                return
            }

            if (!mediaSupabaseClient) {
                alert('Supabase æœªåˆå§‹åŒ–ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•')
                return
            }

            const uploadBtn = document.getElementById('mediaUploadBtn')
            uploadBtn.disabled = true
            uploadBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ä¸Šä¼ ä¸­...'

            try {
                let successCount = 0
                let failCount = 0
                const uploadedImages = []

                for (const file of mediaPendingFiles) {
                    try {
                        const fileExt = file.name.split('.').pop()
                        const fileName = `${currentMediaLocation.id}/${Date.now()}_${Math.random().toString(36).substring(7)}.${fileExt}`

                        const { data, error } = await mediaSupabaseClient.storage
                            .from('led-images')
                            .upload(fileName, file)

                        if (error) {
                            console.error('ä¸Šä¼ å¤±è´¥:', error)
                            failCount++
                        } else {
                            successCount++

                            // è·å–å…¬å¼€URL
                            const { data: urlData } = mediaSupabaseClient.storage
                                .from('led-images')
                                .getPublicUrl(fileName)

                            // ä¿å­˜ä½ç½®æ˜ å°„å…³ç³»
                            const imageMapping = {
                                locationId: currentMediaLocation.id,
                                locationName: currentMediaLocation.name,
                                page: currentMediaLocation.path,
                                element: currentMediaLocation.element,
                                fileName: fileName,
                                publicUrl: urlData.publicUrl,
                                uploadedAt: new Date().toISOString(),
                                size: file.size,
                                originalName: file.name
                            }

                            uploadedImages.push(imageMapping)
                            console.log('âœ… ä¸Šä¼ æˆåŠŸ:', fileName, imageMapping)
                        }
                    } catch (error) {
                        console.error('æ–‡ä»¶ä¸Šä¼ é”™è¯¯:', error)
                        failCount++
                    }
                }

                // ä¿å­˜æ˜ å°„å…³ç³»åˆ° localStorage
                if (uploadedImages.length > 0) {
                    const existingMappings = JSON.parse(localStorage.getItem('image_location_mappings') || '{}')
                    uploadedImages.forEach(img => {
                        existingMappings[img.locationId] = img
                    })
                    localStorage.setItem('image_location_mappings', JSON.stringify(existingMappings))
                    console.log('âœ… ä¿å­˜ä½ç½®æ˜ å°„:', existingMappings)
                }

                if (successCount > 0) {
                    alert(`âœ… ä¸Šä¼ å®Œæˆï¼\n\næˆåŠŸ: ${successCount} ä¸ª\nå¤±è´¥: ${failCount} ä¸ª\n\nä¸Šä¼ ä½ç½®: ${currentMediaLocation.desc}\n\nç‚¹å‡»"ç¡®å®š"åå¯ä»¥é¢„è§ˆå‰ç«¯æ•ˆæœ`)
                    clearMediaFiles()
                    loadMediaImages()

                    // è¯¢é—®æ˜¯å¦é¢„è§ˆ
                    if (confirm('æ˜¯å¦ç°åœ¨é¢„è§ˆå‰ç«¯é¡µé¢æ•ˆæœï¼Ÿ')) {
                        previewFrontendLocation()
                    }
                } else {
                    alert(`âŒ ä¸Šä¼ å¤±è´¥\n\nå¤±è´¥: ${failCount} ä¸ª`)
                }
            } catch (error) {
                console.error('ä¸Šä¼ è¿‡ç¨‹å‡ºé”™:', error)
                alert('ä¸Šä¼ å¤±è´¥: ' + error.message)
            } finally {
                uploadBtn.disabled = false
                uploadBtn.innerHTML = '<i class="fas fa-upload"></i> ä¸Šä¼ å…¨éƒ¨'
            }
        }

        // åŠ è½½å›¾ç‰‡åˆ—è¡¨
        async function loadMediaImages() {
            if (!mediaSupabaseClient) {
                console.warn('âš ï¸ Supabase æœªåˆå§‹åŒ–')
                return
            }

            try {
                const { data, error } = await mediaSupabaseClient.storage
                    .from('led-images')
                    .list('', {
                        limit: 100,
                        offset: 0,
                        sortBy: { column: 'created_at', order: 'desc' }
                    })

                if (error) {
                    console.error('åŠ è½½å›¾ç‰‡å¤±è´¥:', error)
                    document.getElementById('mediaImageGrid').innerHTML = `
                        <div class="text-center py-5 text-danger">
                            <i class="fas fa-exclamation-circle fa-3x mb-3"></i>
                            <p>åŠ è½½å¤±è´¥: ${error.message}</p>
                            <small class="text-muted">è¯·ç¡®ä¿å·²åˆ›å»º Storage Bucket: led-images</small>
                        </div>
                    `
                    return
                }

                if (!data || data.length === 0) {
                    document.getElementById('mediaImageGrid').innerHTML = `
                        <div class="text-center py-5 text-muted">
                            <i class="fas fa-images fa-3x mb-3"></i>
                            <p>æš‚æ— å›¾ç‰‡ï¼Œè¯·å…ˆä¸Šä¼ </p>
                        </div>
                    `
                    return
                }

                const grid = document.getElementById('mediaImageGrid')
                grid.innerHTML = ''

                // æ›´æ–°ç»Ÿè®¡
                document.getElementById('totalMediaImages').textContent = data.length

                data.forEach(file => {
                    const { data: urlData } = mediaSupabaseClient.storage
                        .from('led-images')
                        .getPublicUrl(file.name)

                    const card = document.createElement('div')
                    card.className = 'image-card'
                    card.innerHTML = `
                        <img src="${urlData.publicUrl}" alt="${file.name}">
                        <div class="image-card-body">
                            <div class="image-card-title">${file.name}</div>
                            <div class="image-card-info">
                                ${(file.metadata?.size / 1024 || 0).toFixed(2)} KB
                            </div>
                            <button class="btn btn-sm btn-primary w-100" onclick="copyMediaUrl('${urlData.publicUrl}')">
                                <i class="fas fa-copy"></i> å¤åˆ¶é“¾æ¥
                            </button>
                        </div>
                    `
                    grid.appendChild(card)
                })

            } catch (error) {
                console.error('åŠ è½½å›¾ç‰‡é”™è¯¯:', error)
            }
        }

        // å¤åˆ¶ URL
        function copyMediaUrl(url) {
            navigator.clipboard.writeText(url).then(() => {
                alert('é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿')
            }).catch(err => {
                console.error('å¤åˆ¶å¤±è´¥:', err)
                prompt('è¯·æ‰‹åŠ¨å¤åˆ¶é“¾æ¥:', url)
            })
        }

        // å½“åˆ‡æ¢åˆ°åª’ä½“ç®¡ç†é¡µé¢æ—¶åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            const mediaLink = document.querySelector('[data-section="media"]')
            if (mediaLink) {
                mediaLink.addEventListener('click', function() {
                    setTimeout(() => {
                        if (document.getElementById('media-content').classList.contains('active')) {
                            initMediaManager()
                            loadMediaImages()
                        }
                    }, 100)
                })
            }
        })
    </script>
    <script>
        // Initialize charts when statistics page is shown
        function initCharts() {
            // Inquiry trend chart
            const inquiryCtx = document.getElementById('inquiryChart');
            if (inquiryCtx) {
                new Chart(inquiryCtx, {
                    type: 'line',
                    data: {
                        labels: ['1æœˆ8æ—¥', '1æœˆ9æ—¥', '1æœˆ10æ—¥', '1æœˆ11æ—¥', '1æœˆ12æ—¥', '1æœˆ13æ—¥', '1æœˆ14æ—¥'],
                        datasets: [{
                            label: 'è¯¢ç›˜æ•°é‡',
                            data: [12, 19, 15, 25, 22, 30, 28],
                            borderColor: '#667eea',
                            backgroundColor: 'rgba(102, 126, 234, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            }
            
            // Product category chart
            const productCtx = document.getElementById('productChart');
            if (productCtx) {
                new Chart(productCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['å®¤å†…å±', 'æˆ·å¤–å±', 'é€æ˜å±', 'åˆ›æ„å±', 'ç§Ÿèµå±'],
                        datasets: [{
                            data: [35, 30, 15, 12, 8],
                            backgroundColor: [
                                '#667eea',
                                '#764ba2',
                                '#f093fb',
                                '#4facfe',
                                '#43e97b'
                            ]
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }
        }
        
        // Call initCharts when statistics section is shown
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function() {
                    if (this.getAttribute('data-section') === 'statistics') {
                        setTimeout(initCharts, 100);
                    }
                });
            });
        });
    </script>
</body>
</html>
