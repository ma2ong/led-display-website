import sqlite3
import os

# Change to admin directory
os.chdir('admin')

# Connect to database
conn = sqlite3.connect('led_admin.db')
cursor = conn.cursor()

# Add solutions table
cursor.execute('''
    CREATE TABLE IF NOT EXISTS solutions (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        title_en TEXT NOT NULL,
        title_zh TEXT NOT NULL,
        description_en TEXT,
        description_zh TEXT,
        category TEXT,
        icon TEXT,
        image TEXT,
        status TEXT DEFAULT 'published',
        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
''')

# Add support table
cursor.execute('''
    CREATE TABLE IF NOT EXISTS support (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        title_en TEXT NOT NULL,
        title_zh TEXT NOT NULL,
        description_en TEXT,
        description_zh TEXT,
        category TEXT,
        icon TEXT,
        image TEXT,
        status TEXT DEFAULT 'published',
        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
''')

# Insert default solutions
default_solutions = [
    ('Commercial Advertising', '商业广告', 
     'High-impact digital signage solutions for retail, shopping malls, and commercial spaces.',
     '适用于零售、购物中心和商业空间的高影响力数字标牌解决方案。',
     'commercial', 'fas fa-building', '', 'published'),
    
    ('Broadcast & Studio', '广播演播室', 
     'Professional LED walls for television studios, control rooms, and broadcast applications.',
     '适用于电视演播室、控制室和广播应用的专业LED墙。',
     'broadcast', 'fas fa-tv', '', 'published'),
    
    ('Events & Rental', '活动租赁', 
     'Portable LED displays for concerts, conferences, exhibitions, and temporary installations.',
     '适用于音乐会、会议、展览和临时安装的便携式LED显示屏。',
     'events', 'fas fa-calendar-alt', '', 'published')
]

for solution in default_solutions:
    cursor.execute('''
        INSERT OR IGNORE INTO solutions (
            title_en, title_zh, description_en, description_zh,
            category, icon, image, status
        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?)
    ''', solution)

# Insert default support services
default_support = [
    ('24/7 Technical Support', '24/7技术支持', 
     'Round-the-clock technical assistance for all your LED display issues.',
     '为您的所有LED显示屏问题提供全天候技术援助。',
     'technical', 'fas fa-headset', '', 'published'),
    
    ('Installation Service', '安装服务', 
     'Professional installation and commissioning services worldwide.',
     '全球专业安装和调试服务。',
     'installation', 'fas fa-tools', '', 'published'),
    
    ('Training Programs', '培训项目', 
     'Comprehensive training for operation and maintenance of LED displays.',
     'LED显示屏操作和维护的综合培训。',
     'training', 'fas fa-graduation-cap', '', 'published'),
    
    ('Warranty Service', '保修服务', 
     'Extended warranty options and comprehensive after-sales support.',
     '延长保修选项和全面的售后支持。',
     'warranty', 'fas fa-shield-alt', '', 'published')
]

for support in default_support:
    cursor.execute('''
        INSERT OR IGNORE INTO support (
            title_en, title_zh, description_en, description_zh,
            category, icon, image, status
        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?)
    ''', support)

# Commit changes
conn.commit()
conn.close()

print("Database updated successfully!")
print("Added solutions and support tables with default data.")