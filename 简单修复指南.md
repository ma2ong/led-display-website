# Supabase + Vercel 简单修复指南

## 问题概述

Supabase 控制台显示 "Deploy project: Not started"，表明前端和后端集成未成功完成。

## 简单修复步骤

### 1. 使用正确的 API 密钥和请求头

```javascript
// 正确的 Supabase 配置
const supabaseUrl = 'https://jirudzbqcxviytcmxegf.supabase.co';
const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImppcnVkemJxY3h2aXl0Y214ZWdmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ0NTExOTUsImV4cCI6MjA3MDAyNzE5NX0.qi0YhrxQmbRa6YsbVA13IpddImIjJKJyd1fgz5jIlt4';

// 正确的请求头
const headers = {
  'apikey': supabaseKey,
  'Authorization': `Bearer ${supabaseKey}`
};
```

### 2. 直接使用 fetch API 进行测试

```javascript
// 测试读取数据
fetch(`${supabaseUrl}/rest/v1/products?select=*&limit=5`, {
  headers: {
    'apikey': supabaseKey,
    'Authorization': `Bearer ${supabaseKey}`
  }
})
.then(response => response.json())
.then(data => console.log('读取成功:', data))
.catch(error => console.error('读取失败:', error));

// 测试写入数据
fetch(`${supabaseUrl}/rest/v1/inquiries`, {
  method: 'POST',
  headers: {
    'apikey': supabaseKey,
    'Authorization': `Bearer ${supabaseKey}`,
    'Content-Type': 'application/json',
    'Prefer': 'return=representation'
  },
  body: JSON.stringify({
    name: '测试用户',
    email: 'test@example.com',
    message: '测试消息'
  })
})
.then(response => response.json())
.then(data => console.log('写入成功:', data))
.catch(error => console.error('写入失败:', error));
```

### 3. 触发部署检测

要触发 Supabase 的部署检测，需要执行以下操作：

1. 读取至少一个表的数据
2. 写入至少一条数据
3. 确保使用正确的 API 密钥和请求头

### 4. 验证集成状态

完成上述操作后，访问 Supabase 控制台检查 "Deploy project" 状态是否已更新为 "Complete"。

## 常见问题解决

1. **HTTP 401 错误**：检查 API 密钥是否正确，确保同时设置了 `apikey` 和 `Authorization` 请求头。

2. **"No API key found" 错误**：确保请求中包含 `apikey` 请求头。

3. **404 错误**：确认 API 路径是否正确，例如 `/rest/v1/表名`。

4. **跨域问题**：确保 Supabase 项目设置中允许了您的域名进行跨域请求。

## 简单测试页面

我们创建了一个简单的测试页面 `simple-supabase-test.html`，您可以通过以下步骤使用它：

1. 打开测试页面
2. 点击"测试连接"按钮验证基本连接
3. 点击"触发部署检测"按钮执行必要的操作
4. 点击"直接 API 调用"按钮进行更直接的 API 测试

完成这些步骤后，检查 Supabase 控制台的部署状态。